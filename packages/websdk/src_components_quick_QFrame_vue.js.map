{"version":3,"file":"src_components_quick_QFrame_vue.js","mappings":";;;;;;;;;;;;;;;AAK2E;AACrD;AACtB,iEAAe,kDAAU,CAAC;IACxB,IAAI,EAAE,QAAQ;IACd,KAAK,EAAE;QACL,GAAG,EAAE;YACH,IAAI,EAAE,MAAM;SACb;QACD,KAAK,EAAE;YACL,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,MAAM;SAChB;QACD,MAAM,EAAE;YACN,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,aAAa;SACvB;QACD,MAAM,EAAE;YACN,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,CAAC;SACX;QACD,SAAS,EAAE;YACT,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,KAAK;SACf;KACF;IACD,IAAI,EAAJ;QACE,OAAO;YACL,iBAAiB,EAAE,SAEN;SACd,CAAC;IACJ,CAAC;IACD,OAAO,EAAE;QACP,IAAI,EAAJ,UAAK,KAAW,IAAG,CAAC;QACpB,IAAI,EAAJ,UAAK,OAAY;;YACf,IAAM,MAAM,GAAG,iFAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC7C,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAA0B,CAAC;YACpD,WAAK,CAAC,aAAa,0CAAE,WAAW,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QACpD,CAAC;QACD,YAAY,YAAC,GAAG;;YACd,IAAI,QAAQ,CAAC;YACb,IAAG,GAAG,CAAC,UAAU,CAAC,8BAA8B,CAAC,EAAC;gBAChD,QAAQ,GAAG,SAAG,CAAC,KAAK,CAAC,8BAA8B,CAAC,0CAAG,CAAC,CAAC,CAAC;aAC3D;iBAAK,IAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAC;gBACpD,QAAQ,GAAG,SAAG,CAAC,KAAK,CAAC,uBAAuB,CAAC,0CAAG,CAAC,CAAC,CAAC;aACpD;iBAAI;gBACH,OAAO,GAAG,CAAC;aACZ;YACC,IAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,iBAAiB,CAAC,CAAC;YAC5D,OAAO,SAAG,CAAC,eAAe,CAAC,IAAI,CAAC,mCAAI,GAAG,CAAC;QAC5C,CAAC;QACD,YAAY,YAAC,MAAM,EAAE,IAAiC;YAAjC,wDAAiC;YAClD,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5B,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;YAC1B,IAAM,GAAG,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;YAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC5B,GAAG,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAC/B;YACD,OAAO,IAAI,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,EAAJ,UAAK,GAAW,EAAE,MAAW,EAAE,OAAgB;YAC7C,IAAI,IAAS,EAAE,KAAU,CAAC;YAC1B,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YACtC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;YACvB,IAAG,OAAO,EAAE;gBACV,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;aACxB;YACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG;gBACrC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;gBACxC,KAAK,CAAC,IAAI,GAAG,GAAG,CAAC;gBACjB,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;gBAC1B,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC;gBACtB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC5B,CAAC,CAAC;YACF,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAsB,CAAC;YACvD,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,EAAE,CAAC;YACd,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QACD,MAAM;YACJ,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QACvB,CAAC;KAGF;IACD,OAAO,EAAP;QAAA,iBAWC;QAVC,IAAM,eAAe,GAAG,UAAC,EAAgB;YACvC,IAAM,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,KAA0B,CAAC;YACpD,IAAI,KAAK,CAAC,aAAa,IAAI,EAAE,CAAC,MAAM,EAAE;gBACpC,OAAO;aACR,CAAC,wDAAwD;YAE1D,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC;QACF,IAAI,CAAC,iBAAiB,GAAG,cAAM,sBAAe,EAAf,CAAe,CAAC;QAC/C,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;IACtD,CAAC;IACD,SAAS;;QACP,IAAI,IAAI,CAAC,iBAAiB,EAAE;YAC1B,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;SACjE;QACD,UAAI,CAAC,GAAG,0CAAE,MAAM,EAAE,CAAC;IACrB,CAAC;IACD,QAAQ,EAAE;QACR,KAAK;YACH,OAAO,YAAU,IAAI,CAAC,MAAM,gCAC1B,IAAI,CAAC,MAAM,eACH,IAAI,CAAC,KAAK,kBAAY,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QAC7D,CAAC;KACF;CACF,CAAC,EAAC;;;;;;;;;;;;;;;;;;ACrHkF;AAC3B;AACL;;;AAGrD;AACA,CAA6F;AAC7F,gBAAgB,uGAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACA,iEAAe;;;;;;;;;;;;;;;ACtC6K,CAAC,iEAAe,oLAAG,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAhN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iDAAiD;AAC9D,UAAU,kBAAkB;AAC5B,GAAG;AACH;AACA;AACA","sources":["webpack://websdk/./src/components/quick/QFrame.vue?b750","webpack://websdk/./src/components/quick/QFrame.vue","webpack://websdk/./src/components/quick/QFrame.vue?2b5a","webpack://websdk/./src/components/quick/QFrame.vue?678e","webpack://websdk/./src/components/quick/QFrame.vue?a7c0"],"sourcesContent":["\n\n\n\n\r\nimport { UrlHelper } from \"../../../../../common/shrimp/helpers/urlHelper\";\r\nimport Vue from \"vue\";\r\nexport default Vue.extend({\r\n  name: \"QFrame\",\r\n  props: {\r\n    url: {\r\n      type: String,\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"100%\",\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: \"calc(100vh)\",\r\n    },\r\n    border: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    isLoading: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      messageListenerCb: undefined as\r\n        | (() => (ev: MessageEvent) => any)\r\n        | undefined,\r\n    };\r\n  },\r\n  methods: {\r\n    test(param: void) {}, // this function is for intellisense in destroyed. delete this if you write any mother with a param other than any\r\n    Send(message: any) {\r\n      const domain = UrlHelper.GetDomain(this.url);\r\n      const frame = this.$refs.frame as HTMLIFrameElement;\r\n      frame.contentWindow?.postMessage(message, domain);\r\n    },\r\n    renderSource(url) {\r\n      let takenSrc;\r\n      if(url.startsWith(\"data:application/pdf;base64,\")){\r\n        takenSrc = url.split(\"data:application/pdf;base64,\")?.[1]; \r\n      }else if(this.url.startsWith(\"data:application/pdf,\")){\r\n        takenSrc = url.split(\"data:application/pdf,\")?.[1];    \r\n      }else{\r\n        return url;\r\n      }  \r\n        const blob = this.base64ToBlob(takenSrc, \"application/pdf\");\r\n        return URL.createObjectURL(blob) ?? url;\r\n    },\r\n    base64ToBlob(base64, type = \"application/octet-stream\") {\r\n        const binStr = atob(base64);\r\n        const len = binStr.length;\r\n        const arr = new Uint8Array(len);\r\n        for (let i = 0; i < len; i++) {\r\n          arr[i] = binStr.charCodeAt(i);\r\n        }\r\n        return new Blob([arr], { type: type });\r\n    },\r\n    post(url: String, params: any, enctype?: String) {\r\n      let form: any, input: any;\r\n      form = document.createElement(\"form\");\r\n      form.action = this.renderSource(url);\r\n      form.method = \"post\";\r\n      form.target = \"qframe\";\r\n      if(enctype) {\r\n        form.enctype = enctype;\r\n      }\r\n      Object.keys(params).forEach(function (elm) {\r\n          input = document.createElement(\"input\");\r\n          input.name = elm;\r\n          input.value = params[elm];\r\n          input.type = \"hidden\";\r\n          form.appendChild(input);\r\n      })\r\n      const frame = this.$refs['frame'] as HTMLIFrameElement;\r\n      frame.appendChild(form);\r\n      form.submit();\r\n      frame.removeChild(form);\r\n    },\r\n    onLoad() {\r\n      this.$emit(\"onLoad\");\r\n    }\r\n\r\n\r\n  },\r\n  mounted() {\r\n    const messageListener = (ev: MessageEvent) => {\r\n      const frame = this.$refs.frame as HTMLIFrameElement;\r\n      if (frame.contentWindow != ev.source) {\r\n        return;\r\n      } // skip for this listener. Another frame sent \"message\".\r\n\r\n      this.$emit(\"onMessage\", ev.data);\r\n    };\r\n    this.messageListenerCb = () => messageListener;\r\n    window.addEventListener(\"message\", messageListener);\r\n  },\r\n  destroyed() {\r\n    if (this.messageListenerCb) {\r\n      window.removeEventListener(\"message\", this.messageListenerCb());\r\n    }\r\n    this.$el?.remove();\r\n  },\r\n  computed: {\r\n    style() {\r\n      return `border:${this.border};overflow:hidden;height:${\r\n        this.height\r\n      };width:${this.width};opacity:${this.isLoading ? 0.1 : 1}`;\r\n    },\r\n  },\r\n});\r\n","import { render, staticRenderFns } from \"./QFrame.vue?vue&type=template&id=7da30b0e&\"\nimport script from \"./QFrame.vue?vue&type=script&lang=ts&\"\nexport * from \"./QFrame.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/quick/quick/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7da30b0e')) {\n      api.createRecord('7da30b0e', component.options)\n    } else {\n      api.reload('7da30b0e', component.options)\n    }\n    module.hot.accept(\"./QFrame.vue?vue&type=template&id=7da30b0e&\", function () {\n      api.rerender('7da30b0e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/quick/QFrame.vue\"\nexport default component.exports","import mod from \"-!../../../../../node_modules/ts-loader/index.js??clonedRuleSet-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QFrame.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/ts-loader/index.js??clonedRuleSet-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QFrame.vue?vue&type=script&lang=ts&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./QFrame.vue?vue&type=template&id=7da30b0e&\"","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"iframe\", {\n    ref: \"frame\",\n    style: _vm.style,\n    attrs: { src: _vm.renderSource(this.url), name: \"qframe\" },\n    on: { load: _vm.onLoad },\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"names":[],"sourceRoot":""}